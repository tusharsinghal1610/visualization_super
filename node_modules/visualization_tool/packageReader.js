var readJson = require('read-package-json')
var Graph = require("./graph")
// readJson(filename, [logFunction=noop], [strict=false], cb)
readJson('./package.json', console.error, false, async function (er, data) {
  if (er) {
    console.error("There was an error reading the file")
    return
  }
  else{
    //console.error('the package data is', data);
    var mygraph = new Graph();
    var dependencies = Object.keys(data.dependencies);
    await mygraph.buildGraph(dependencies);
  }
});
